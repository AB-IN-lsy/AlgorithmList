# 图论

## [牛奶工厂](https://www.acwing.com/problem/content/description/1473/)

**难度：** 中等

**标签：** 图的遍历、DFS、**Floyd传递闭包**

**题意与思路：**

寻找有向图的“**超级汇点**”。（能被所有点走到的点一定是出度为0的点，可爆搜）。也可floyd传递闭包（传递闭包就是对图的可达性关系的扩展，使得如果存在间接路径 a→b→c，则直接添加一条 a→c 的边。）

## [棋盘覆盖](https://www.acwing.com/problem/content/description/374/)

**难度：** 中等

**标签：** 二分图、匈牙利算法

**题意与思路：**

**棋盘模型转化**：将棋盘的格子视为图中的节点。 如果两个格子相邻且均可放置骨牌，则用一条边连接这两个格子。 问题转化为：在这个图中，找到最大的**二分图匹配**。黑色格子和白色格子分别组成图的两个独立集合 U 和 V。只允许连接黑白格子之间的边。

## [货物运输](https://www.acwing.com/problem/content/4244/)

**难度：** 中等

**标签：** 最短路变种、**最短边的最大值**

**题意与思路：**

**题意：** 给定一个无向图，每条边有最大承载能力，要求从节点 1 到节点 n，找到路径中最小边权最大的路径，计算这条路径的最大承载能力。**解法：** 使用改造的最短路算法，通过优先队列（大根堆）进行松弛操作，不断更新每个节点的最大承载能力。每次松弛时，取当前路径的最小边权作为瓶颈值，选择瓶颈值最大的路径到终点，最终输出最大承载能力

`capacity[neighbor]=max(capacity[neighbor],min(capacity[node],edge weight))`

## [农场派对](https://www.acwing.com/problem/content/description/1134/)

**难度：** 中等

**标签：** 最短路、反向建边

**题意与思路：**

**多对一的最短路≡反向建图一对多的最短路**

## [虫洞](https://www.acwing.com/problem/content/906/)

**难度：** 简单

**标签：** SPFA、负环

**题意与思路：**

是否有负环即可，别忘把所有点都入队（确保算法可以从图的所有节点出发）

## [最短距离](https://www.acwing.com/problem/content/description/1490/)

**难度：** 中等

**标签：** 超级源点、Dijkstra

**题意与思路：**

通过引入一个虚拟的超级源点（编号为$0$），连接所有有商店的村庄，且边权为$0$，问题从 **查询村庄到最近商店的最短距离** 转化为 **超级源点到查询村庄的最短距离**，从而将多源最短路径问题简化为单源最短路径问题。利用Dijkstra算法，从超级源点出发，计算所有村庄到超级源点的最短距离，这一距离即为村庄到最近商店的最短距离。最终，对于每个查询直接返回预先计算的结果即可，算法高效且逻辑清晰。

## [图的最大边权的最小值](https://leetcode.cn/problems/minimize-the-maximum-edge-weight-of-graph/)

**难度：** 困难

**标签：** **逆向思维**、Dijkstra、**最大边权最小的路径**

**题意与思路：**

**前要：**在普通的最短路问题中，“最短路”指的是路径边权和最小的路径。而在这里，“最短路”被重新定义为“**路径中边权最大值最小的路径**”。在路径代价定义为“最大边权”时，贪心扩展的变成了路径中边权的**最大值**，每次找当前能访问到的边权最小的边。

**题意：**题目给定一个由 $n$ 个节点组成的无向图，节点编号为 $0$ 到 $n-1$，图的边由数组 $edges$ 表示，其中每条边为 $(A_i, B_i, W_i)$，表示节点 $A_i$ 和节点 $B_i$ 之间有一条权重为 $W_i$ 的无向边。任务是通过删除一些边，使图满足以下条件：图中所有其他节点必须可以到达节点 $0$。删除边后，图中边的最大权重不超过给定的 $threshold$。每个节点到节点 $0$ 的路径不超过 $threshold$。需要返回满足条件时图的最大边权的最小值。如果无法满足所有条件，返回 $-1$。



**思路：等价转换！！**

把图中的每条边**反向**，那么原问题等价于删边之后：

1. 从 0 出发，必须能访问到所有点。

2. 每个点的**入度**至多为 *threshold*。（一定能满足 *threshold* 的要求。）

   可以从 0 出发，每次走当前能访问到的边中，边权最小的边，这类似 Dijkstra 求最短路（计算路径边权最大值）。更新规则是：新的路径代价为 `max(当前路径的代价, 新的边权)`

   也可二分边权+DFS

## [关闭分部的可行集合数目](https://leetcode.cn/problems/number-of-possible-sets-of-closing-branches/description/)

**难度：** 困难

**标签：** Floyd、二进制枚举

**题意与思路：**

**题意：**给定一个公司在全国的 $n$ 个分部以及它们之间的道路信息 $roads$，每条道路由 $[u_i, v_i, w_i]$ 表示连接了 $u_i$ 和 $v_i$ 的一条长度为 $w_i$ 的无向道路。需要关闭一些分部，满足以下条件：

剩余的分部之间必须两两互相连通。

剩余分部的任意两点之间的最远距离不能超过 $maxDistance$。

要求计算满足上述条件的可行关闭方案的数量。



**思路：** Floyd 计算全局最短路径:预处理所有分部之间的最短路径。枚举所有可能的关闭方案，每种方案可以用一个长度为 $n$ 的二进制数表示，$1$ 表示分部保留，$0$ 表示分部关闭。对于每种方案：

过滤掉所有不连通的方案。可以使用 DFS 或 BFS 检查连通性。

对于剩余的连通子图，检查是否所有点对之间的最短路径小于等于 $maxDistance$。
